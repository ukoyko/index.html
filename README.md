<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Éï„É©„ÉØ„Éº„Éá„Ç£„Çπ„Éó„É¨„Ç§„Éª„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÅÆÂÜíÈô∫</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        .game-container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        
        .header {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            text-align: center;
            backdrop-filter: blur(10px);
        }
        
        .title {
            font-size: 2.5em;
            font-weight: 700;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 10px;
        }
        
        .subtitle {
            color: #666;
            font-size: 1.1em;
            margin-bottom: 20px;
        }
        
        .progress-bar {
            width: 100%;
            height: 12px;
            background: #e0e0e0;
            border-radius: 6px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #4ecdc4);
            border-radius: 6px;
            transition: width 0.5s ease;
        }
        
        .stats {
            display: flex;
            justify-content: space-around;
            margin-top: 15px;
        }
        
        .stat {
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.5em;
            font-weight: 700;
            color: #4ecdc4;
        }
        
        .stat-label {
            font-size: 0.9em;
            color: #666;
        }
        
        .game-content {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 40px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            backdrop-filter: blur(10px);
            flex-grow: 1;
        }
        
        .chapter-intro {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .chapter-title {
            font-size: 1.8em;
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 10px;
        }
        
        .character {
            font-size: 4em;
            margin: 20px 0;
        }
        
        .story-text {
            font-size: 1.1em;
            line-height: 1.6;
            color: #666;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(74, 85, 104, 0.05);
            border-radius: 10px;
        }
        
        .question {
            margin-bottom: 30px;
        }
        
        .question-text {
            font-size: 1.3em;
            font-weight: 500;
            color: #2d3748;
            margin-bottom: 20px;
            line-height: 1.5;
        }
        
        .options {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .option {
            padding: 20px;
            background: #f7fafc;
            border: 2px solid #e2e8f0;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.1em;
        }
        
        .option:hover {
            background: #edf2f7;
            border-color: #4ecdc4;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .option.selected {
            background: #4ecdc4;
            color: white;
            border-color: #4ecdc4;
        }
        
        .option.correct {
            background: #48bb78;
            color: white;
            border-color: #48bb78;
        }
        
        .option.incorrect {
            background: #f56565;
            color: white;
            border-color: #f56565;
        }
        
        .submit-btn {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            display: block;
            margin-left: auto;
            margin-right: auto;
        }
        
        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .submit-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .feedback {
            margin-top: 30px;
            padding: 25px;
            border-radius: 15px;
            display: none;
        }
        
        .feedback.correct {
            background: linear-gradient(135deg, #48bb78, #38a169);
            color: white;
        }
        
        .feedback.incorrect {
            background: linear-gradient(135deg, #f56565, #e53e3e);
            color: white;
        }
        
        .feedback-title {
            font-size: 1.3em;
            font-weight: 600;
            margin-bottom: 15px;
        }
        
        .explanation {
            font-size: 1.1em;
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .learning-point {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
        }
        
        .next-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 12px 25px;
            border-radius: 20px;
            font-size: 1em;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
        }
        
        .next-btn:hover {
            background: white;
            color: #4a5568;
        }
        
        .achievement {
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 10px 25px rgba(255, 215, 0, 0.3);
        }
        
        .badge {
            font-size: 3em;
            margin-bottom: 10px;
        }
        
        .final-results {
            text-align: center;
            padding: 30px;
        }
        
        .restart-btn {
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: all 0.3s ease;
        }
        
        .restart-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        }
        
        .weakness-report {
            background: #f7fafc;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #4ecdc4;
        }
        
        .weakness-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #2d3748;
            margin-bottom: 15px;
        }
        
        .weakness-item {
            margin: 10px 0;
            padding: 10px 15px;
            background: white;
            border-radius: 8px;
            border-left: 3px solid #ff6b6b;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1 class="title">üå∏ „Éï„É©„ÉØ„Éº„Éá„Ç£„Çπ„Éó„É¨„Ç§„Éª„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÅÆÂÜíÈô∫ üå∏</h1>
            <p class="subtitle">Ê•≠ÂãôÂßîË®ó„Çπ„Çø„ÉÉ„Éï„Å®„Åó„Å¶„ÅÆÁü•Ë≠ò„Å®ÂøÉÊßã„Åà„ÇíË∫´„Å´„Å§„Åë„ÇãÊóÖ</p>
            
            <div class="progress-bar">
                <div class="progress" id="progressBar"></div>
            </div>
            
            <div class="stats">
                <div class="stat">
                    <div class="stat-value" id="currentQuestion">1</div>
                    <div class="stat-label">ÁèæÂú®„ÅÆÂïèÈ°å</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="score">0</div>
                    <div class="stat-label">„Çπ„Ç≥„Ç¢</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="level">Ë¶ãÁøí„ÅÑ</div>
                    <div class="stat-label">„É¨„Éô„É´</div>
                </div>
            </div>
        </div>
        
        <div class="game-content" id="gameContent">
            <!-- „Ç≤„Éº„É†„Ç≥„É≥„ÉÜ„É≥„ÉÑ„Åå„Åì„Åì„Å´ÊåøÂÖ•„Åï„Çå„Çã -->
        </div>
    </div>

    <script>
        class ConductCodeGame {
            constructor() {
                this.currentQuestion = 0;
                this.score = 0;
                this.maxScore = 0;
                this.wrongAnswers = [];
                this.selectedAnswer = null;
                this.gameData = this.initializeGameData();
                this.init();
            }
            
            initializeGameData() {
                return {
                    chapters: [
                        {
                            title: "Á¨¨1Á´†Ôºö„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÅÆÂøÉÊßã„Åà",
                            character: "üå±",
                            story: "„ÅÇ„Å™„Åü„ÅØÊñ∞„Åü„Å´„Éï„É©„ÉØ„Éº„Éá„Ç£„Çπ„Éó„É¨„Ç§„ÅÆ‰∏ñÁïå„Å´Ë∂≥„ÇíË∏è„ÅøÂÖ•„Çå„Åü„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Åß„Åô„ÄÇÁæé„Åó„ÅÑËä±„ÄÖ„Å´Âõ≤„Åæ„Çå„ÅüÂ∑•Êàø„Åß„ÄÅÂÖàËº©„Åü„Å°„Å®„ÅÆÈñ¢‰øÇÊÄß„Å´„Å§„ÅÑ„Å¶Â≠¶„Å≥„Åæ„Åó„Çá„ÅÜ„ÄÇ",
                            questions: [0, 1, 2]
                        },
                        {
                            title: "Á¨¨2Á´†Ôºö„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÁßòË®£",
                            character: "üó£Ô∏è",
                            story: "ÁèæÂ†¥„Åß„ÅØÊßò„ÄÖ„Å™‰∫∫„ÄÖ„Å®ÂçîÂäõ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÂäπÊûúÁöÑ„Å™„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅÆÊäÄË°ì„ÇíË∫´„Å´„Å§„Åë„ÄÅ„ÉÅ„Éº„É†„ÉØ„Éº„ÇØ„ÇíÈ´ò„ÇÅ„Åæ„Åó„Çá„ÅÜ„ÄÇ",
                            questions: [3, 4, 5]
                        },
                        {
                            title: "Á¨¨3Á´†ÔºöÂõ∞Èõ£„Å™Áä∂Ê≥Å„Å∏„ÅÆÂØæÂøú",
                            character: "‚ö°",
                            story: "„ÇØ„É™„Çπ„Éû„Çπ„Ç∑„Éº„Ç∫„É≥„ÅÆÁπÅÂøôÊúü„ÅåÂà∞Êù•„Åó„Åæ„Åó„Åü„ÄÇ‰∫àÊúü„Åõ„Å¨ÂïèÈ°å„ÅåÁô∫Áîü„Åô„Çã‰∏≠„Åß„ÄÅ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶„ÅÆÁúü‰æ°„ÅåÂïè„Çè„Çå„Åæ„Åô„ÄÇ",
                            questions: [6, 7, 8]
                        },
                        {
                            title: "ÊúÄÁµÇÁ´†Ôºö„Éû„Çπ„Çø„Éº„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å∏„ÅÆÈÅì",
                            character: "üëë",
                            story: "„ÅÇ„Å™„Åü„ÅÆÁü•Ë≠ò„Å®ÁµåÈ®ì„ÅåË©¶„Åï„Çå„ÇãÊúÄÁµÇË©¶È®ì„Åß„Åô„ÄÇÁúü„ÅÆ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶ÊàêÈï∑„Åß„Åç„Çã„Åß„Åó„Çá„ÅÜ„ÅãÔºü",
                            questions: [9]
                        }
                    ],
                    questions: [
                        {
                            text: "Ê•≠ÂãôÂßîË®ó„Å´„Åä„Åë„ÇãÈñ¢‰øÇÊÄß„Å´„Å§„ÅÑ„Å¶„ÄÅÊúÄ„ÇÇÈÅ©Âàá„Å™Ë°®Áèæ„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü",
                            options: [
                                "‰ºöÁ§æ„Å®„Çπ„Çø„ÉÉ„Éï„ÅÆ‰∏ä‰∏ãÈñ¢‰øÇ„Åß„ÅÇ„Çã",
                                "„Åù„Çå„Åû„Çå„ÅåÂ∞ÇÈñÄÊÄß„ÇíÊåÅ„Å§ÂØæÁ≠â„Å™„Éë„Éº„Éà„Éä„Éº„Ç∑„ÉÉ„Éó„Åß„ÅÇ„Çã", 
                                "ÁµåÈ®ìÂπ¥Êï∞„Å´„Çà„Å£„Å¶Á´ãÂ†¥„ÅåÊ±∫„Åæ„ÇãÈñ¢‰øÇ„Åß„ÅÇ„Çã"
                            ],
                            correct: 1,
                            difficulty: 1,
                            explanation: "Ê•≠ÂãôÂßîË®ó„Åß„ÅØ„ÄÅ„Åä‰∫í„ÅÑ„ÅåÂ∞ÇÈñÄÊÄß„ÇíÂ∞äÈáç„ÅóÂêà„ÅÜÂØæÁ≠â„Å™„Éë„Éº„Éà„Éä„Éº„Ç∑„ÉÉ„Éó„ÅåÂü∫Êú¨„Å®„Å™„Çä„Åæ„Åô„ÄÇ",
                            learningPoint: "üí° Ê•≠ÂãôÂßîË®ó„ÅØÈõáÁî®Èñ¢‰øÇ„Åß„ÅØ„Å™„Åè„ÄÅÂ∞ÇÈñÄÁöÑ„Å™„Çµ„Éº„Éì„Çπ„ÇíÊèê‰æõ„Åô„ÇãÂØæÁ≠â„Å™Èñ¢‰øÇ„Åß„Åô„ÄÇÁõ∏‰∫íÂ∞äÈáç„ÅåÊàêÂäü„ÅÆÈçµ„Å®„Å™„Çä„Åæ„Åô„ÄÇ"
                        },
                        {
                            text: "ÁèæÂ†¥„Åß„ÅÆ„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅßÊúÄ„ÇÇÈáçË¶Å„Å™„Åì„Å®„ÅØ‰Ωï„Åß„Åô„ÅãÔºü",
                            options: [
                                "Â§ß„Åç„Å™Â£∞„Åß„ÅØ„Å£„Åç„Çä„Å®Ë©±„Åô",
                                "ÂÜ∑Èùô„ÅßÁ©è„ÇÑ„Åã„Å™Â£∞Èáè„Å®‰∏ÅÂØß„Å™Ë®ÄËëâÈÅ£„ÅÑ",
                                "Ëá™ÂàÜ„ÅÆÊÑèË¶ã„ÇíÂº∑„Åè‰∏ªÂºµ„Åô„Çã"
                            ],
                            correct: 1,
                            difficulty: 1,
                            explanation: "„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å™ÁèæÂ†¥„Åß„ÅØ„ÄÅÂÜ∑Èùô„Åß‰∏ÅÂØß„Å™„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„Åå‰ø°È†ºÈñ¢‰øÇ„ÇíÁØâ„Åç„Åæ„Åô„ÄÇ",
                            learningPoint: "üéØ Â£∞„ÅÆ„Éà„Éº„É≥„Å®Ë®ÄËëâÈÅ£„ÅÑ„ÅØ„ÄÅ„ÅÇ„Å™„Åü„ÅÆ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Åï„ÇíË°®Áèæ„Åô„ÇãÈáçË¶Å„Å™Ë¶ÅÁ¥†„Åß„Åô„ÄÇ"
                        },
                        {
                            text: "„Éá„Ç∂„Ç§„É≥„ÇÑÊäÄË°ìÁöÑ„Å™ÊÑèË¶ã„ÅÆÁõ∏ÈÅï„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅÆÈÅ©Âàá„Å™ÂØæÂøú„ÅØ„Å©„Çå„Åß„Åô„ÅãÔºü",
                            options: [
                                "Ëá™ÂàÜ„ÅÆÊÑèË¶ã„ÇíÂº∑„Åè‰∏ªÂºµ„Åô„Çã",
                                "„ÄåÂà•„ÅÆÊñπÊ≥ï„ÇÇÊ§úË®é„Åó„Å¶„Åø„Åæ„Åõ„Çì„ÅãÔºü„Äç„Å™„Å©„ÅÆÊèêÊ°àÂûã„ÅÆË°®Áèæ„Çí‰Ωø„ÅÜ",
                                "Èªô„Å£„Å¶Âæì„ÅÜ"
                            ],
                            correct: 1,
                            difficulty: 2,
                            explanation: "ÊèêÊ°àÂûã„ÅÆË°®Áèæ„ÅØÁõ∏Êâã„ÇíÂ∞äÈáç„Åó„Å™„Åå„ÇâÂª∫Ë®≠ÁöÑ„Å™Ë≠∞Ë´ñ„Çí‰øÉ„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Å´„Çà„ÇäÂâµÈÄ†ÁöÑ„Å™Ëß£Ê±∫Á≠ñ„ÅåÁîü„Åæ„Çå„Åæ„Åô„ÄÇ",
                            learningPoint: "ü§ù ÂØæÁ´ã„Åß„ÅØ„Å™„ÅèÂçîÂäõÁöÑ„Å™ÂïèÈ°åËß£Ê±∫„Å´„Çà„Çä„ÄÅ„Çà„ÇäËâØ„ÅÑÁµêÊûú„ÇíÁîü„ÅøÂá∫„Åô„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ"
                        },
                        {
                            text: "ÁπÅÂøôÊúü„ÅßÁâπ„Å´Ê≥®ÊÑè„Åô„Åπ„Åç„Åì„Å®„ÅØ‰Ωï„Åß„Åô„ÅãÔºüÔºàÊâπÂà§ÁöÑÊÄùËÄÉÂïèÈ°åÔºâ",
                            options: [
                                "Âøô„Åó„ÅÑ„Å®„Åç„Åì„Åù„ÄÅ„ÅÑ„Å§„ÇÇ‰ª•‰∏ä„Å´Â£∞„ÇíÊéõ„ÅëÂêà„ÅÑÂçîÂäõ„Åô„Çã",
                                "ÁÑ¶„Çä„ÇÑÁñ≤„Çå„Åå„Åü„Åæ„Çä„ÇÑ„Åô„ÅÑ„ÅÆ„ÅßÂÜ∑Èùô„Åï„Çí‰øù„Å§", 
                                "ÊôÇÈñì„Åå„Å™„ÅÑ„ÅÆ„ÅßÂÆâÂÖ®Á¢∫Ë™ç„ÅØÁ∞°Âçò„Å´Ê∏à„Åæ„Åõ„Çã"
                            ],
                            correct: 1,
                            difficulty: 3,
                            explanation: "ÁπÅÂøôÊúü„Åì„ÅùÂÜ∑Èùô„Åï„ÅåÈáçË¶Å„Åß„Åô„ÄÇÁÑ¶„Çä„ÅØÂà§Êñ≠Âäõ„ÇíÈàç„Çâ„Åõ„ÄÅÂìÅË≥™„ÇÑÂÆâÂÖ®ÊÄß„ÅÆ‰Ωé‰∏ã„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ",
                            learningPoint: "‚öñÔ∏è Âøô„Åó„ÅÑÊôÇ„Åª„Å©Âü∫Êú¨„Å´Á´ã„Å°Ëøî„Çã„Åì„Å®„Åå„ÄÅÁµêÊûúÁöÑ„Å´ÂäπÁéáÁöÑ„ÅßÂÆâÂÖ®„Å™‰ΩúÊ•≠„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ"
                        },
                        {
                            text: "„ÉÅ„Éº„É†ÂÜÖ„ÅßÊÑèË¶ã„ÅÆË°ùÁ™Å„ÅåËµ∑„Åç„ÅüÊôÇ„ÄÅ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶ÊúÄ„ÇÇÈáçË¶Å„Å™Ë°åÂãï„ÅØÔºüÔºàÂøúÁî®ÂïèÈ°åÔºâ",
                            options: [
                                "ÁµåÈ®ì„ÅÆÈï∑„ÅÑ‰∫∫„ÅÆÊÑèË¶ã„ÇíÂÑ™ÂÖà„Åô„Çã",
                                "Â§öÊï∞Ê±∫„ÅßÊ±∫„ÇÅ„Çã",
                                "ÂÖ®Âì°„ÅÆÊÑèË¶ã„ÇíËÅû„Åç„ÄÅÂª∫Ë®≠ÁöÑ„Å™Ëß£Ê±∫Á≠ñ„ÇíÊ®°Á¥¢„Åô„Çã"
                            ],
                            correct: 2,
                            difficulty: 4,
                            explanation: "Áúü„ÅÆ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÅØ„ÄÅÁï∞„Å™„ÇãË¶ñÁÇπ„ÇíÁµ±Âêà„Åó„Å¶ÊúÄÈÅ©Ëß£„ÇíË¶ã„Å§„Åë„ÇãËÉΩÂäõ„ÇíÊåÅ„Å°„Åæ„Åô„ÄÇ",
                            learningPoint: "üß© Â§öÊßò„Å™ÊÑèË¶ã„ÇíÁµ±Âêà„Åô„Çã„Åì„Å®„Åß„ÄÅ‰∏Ä‰∫∫„Åß„ÅØÊÄù„ÅÑ„Å§„Åã„Å™„ÅÑÈù©Êñ∞ÁöÑ„Å™„Ç¢„Ç§„Éá„Ç¢„ÅåÁîü„Åæ„Çå„Åæ„Åô„ÄÇ"
                        },
                        {
                            text: "„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆÂâç„Åß„ÅÆ„ÉÅ„Éº„É†„Å®„Åó„Å¶„ÅÆÊåØ„ÇãËàû„ÅÑ„ÅßÊúÄ„ÇÇÈáçË¶Å„Å™„Åì„Å®„ÅØÔºü",
                            options: [
                                "ÂÄã‰∫∫„ÅÆÊÑèË¶ã„ÇíÂº∑„Åè‰∏ªÂºµ„Åô„Çã",
                                "„ÉÅ„Éº„É†„Å®„Åó„Å¶„ÅÆ‰∏ÄË≤´ÊÄß„Çí‰øù„Å°„ÄÅÂçîÂäõÁöÑ„Å™ÊÖãÂ∫¶„ÇíÁ§∫„Åô",
                                "‰ªñ„ÅÆ„Çπ„Çø„ÉÉ„Éï„ÅÆÂïèÈ°åÁÇπ„ÇíÊåáÊëò„Åô„Çã"
                            ],
                            correct: 1,
                            difficulty: 2,
                            explanation: "„ÇØ„É©„Ç§„Ç¢„É≥„Éà„Å´ÂØæ„Åó„Å¶„ÅØ„ÉÅ„Éº„É†‰∏Ä‰∏∏„Å®„Å™„Å£„Åü‰ø°È†º„Åß„Åç„ÇãÂßøÂã¢„ÇíÁ§∫„Åô„Åì„Å®„ÅåÈáçË¶Å„Åß„Åô„ÄÇ",
                            learningPoint: "üë• „ÉÅ„Éº„É†„ÅÆÁµêÊùüÂäõ„ÅØ„ÄÅ„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆ‰ø°È†º„Å®Ê∫ÄË∂≥Â∫¶„Å´Áõ¥Áµê„Åó„Åæ„Åô„ÄÇ"
                        },
                        {
                            text: "ÁèæÂ†¥„Åß‰∫àÊúü„Åõ„Å¨Áä∂Ê≥Å„ÅåÁô∫Áîü„Åó„ÅüÂ†¥Âêà„ÅÆÊúÄÈÅ©„Å™ÂØæÂøúÈ†ÜÂ∫è„ÅØÔºüÔºàË´ñÁêÜÁöÑÊÄùËÄÉÂïèÈ°åÔºâ",
                            options: [
                                "‰∏Ä‰∫∫„ÅßËß£Ê±∫„ÇíË©¶„Åø„ÄÅ„Å†„ÇÅ„Å™„ÇâÂ†±Âëä„Åô„Çã",
                                "ÂÜ∑Èùô„Å´Áä∂Ê≥Å„ÇíÊääÊè°„Åó„ÄÅÂøÖË¶Å„Å´Âøú„Åò„Å¶ÈÄü„ÇÑ„Åã„Å´Â†±Âëä„ÉªÁõ∏Ë´á„Åô„Çã",
                                "‰ªñ„ÅÆ‰∫∫„Å´‰ªª„Åõ„Å¶Ëá™ÂàÜ„ÅØÈÄöÂ∏∏Ê•≠Âãô„ÇíÁ∂ö„Åë„Çã"
                            ],
                            correct: 1,
                            difficulty: 4,
                            explanation: "„Åæ„ÅöÂÜ∑Èùô„Å™Áä∂Ê≥ÅÊääÊè°„ÄÅ„Åù„Åó„Å¶ÈÅ©Âàá„Å™„Çø„Ç§„Éü„É≥„Ç∞„Åß„ÅÆÂ†±Âëä„ÉªÁõ∏Ë´á„ÅåÂïèÈ°åËß£Ê±∫„ÅÆÈâÑÂâá„Åß„Åô„ÄÇ",
                            learningPoint: "üéØ ÂïèÈ°åËß£Ê±∫„ÅÆ„Éó„É≠„Çª„ÇπÔºö‚ë†Áä∂Ê≥ÅÊääÊè° ‚ë°ÂΩ±ÈüøË©ï‰æ° ‚ë¢ÈÅ©Âàá„Å™Â†±Âëä ‚ë£ÂçîÂäõÁöÑËß£Ê±∫"
                        },
                        {
                            text: "„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶ÊúÄ„ÇÇÈáçË¶Å„Å™Âü∫Áõ§„Å®„Å™„Çã„Åì„Å®„ÅØÔºü",
                            options: [
                                "Á¥ÑÊùü„ÅÆÈÅµÂÆà„Å®Ëá™Â∑±ÁÆ°ÁêÜ„ÅÆÂæπÂ∫ï",
                                "Ëá™ÂàÜ„ÅÆÊÑèË¶ã„ÇíÊúÄÂÑ™ÂÖà„Åô„Çã",
                                "‰ªñ‰∫∫„ÅÆÊÑèË¶ã„Å´Â∏∏„Å´Âæì„ÅÜ"
                            ],
                            correct: 0,
                            difficulty: 3,
                            explanation: "‰ø°È†º„Åï„Çå„Çã„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÅÆÂü∫Áõ§„ÅØ„ÄÅÁ¥ÑÊùü„ÇíÂÆà„Çä„ÄÅËá™ÂàÜËá™Ë∫´„ÇíÈÅ©Âàá„Å´ÁÆ°ÁêÜ„Åô„ÇãËÉΩÂäõ„Åß„Åô„ÄÇ",
                            learningPoint: "üèõÔ∏è ‰ø°È†º„ÅØÂÖ®„Å¶„ÅÆ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´Èñ¢‰øÇ„ÅÆÂü∫Á§é„Å®„Å™„ÇãÊúÄ„ÇÇÈáçË¶Å„Å™Ë≥áÁî£„Åß„Åô„ÄÇ"
                        },
                        {
                            text: "Ê•≠Âãô‰∏ä„ÅÆÂïèÈ°å„ÇÑÊÇ©„Åø„Åå„ÅÇ„ÇãÂ†¥Âêà„ÅÆÂØæÂøú„Å®„Åó„Å¶ÊúÄ„ÇÇÂª∫Ë®≠ÁöÑ„Å™„ÇÇ„ÅÆ„ÅØÔºü",
                            options: [
                                "‰∏Ä‰∫∫„ÅßÊä±„ÅàËæº„Çì„ÅßËß£Ê±∫Á≠ñ„ÇíË¶ã„Å§„Åë„Çã",
                                "ÂêåÂÉö„Å´ÊÑöÁó¥„Å®„Åó„Å¶Áõ∏Ë´á„Åô„Çã",
                                "ÈÅ†ÊÖÆ„Å™„Åè‰ºöÁ§æ„Å´Áõ∏Ë´á„Åó„ÄÅÂª∫Ë®≠ÁöÑ„Å™Ëß£Ê±∫„ÇíÊ±Ç„ÇÅ„Çã"
                            ],
                            correct: 2,
                            difficulty: 3,
                            explanation: "ÂïèÈ°å„ÅÆÊó©ÊúüÁô∫Ë¶ã„Å®ÈÅ©Âàá„Å™Áõ∏Ë´á„ÅØ„ÄÅ„Çà„ÇäÂ§ß„Åç„Å™ÂïèÈ°å„ÇíÈò≤„Åé„ÄÅÁµÑÁπîÂÖ®‰Ωì„ÅÆÊîπÂñÑ„Å´„Å§„Å™„Åå„Çä„Åæ„Åô„ÄÇ",
                            learningPoint: "üîÑ „Ç™„Éº„Éó„É≥„Å™„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„ÅØÁµÑÁπî„ÅÆÂ≠¶Áøí„Å®ÊàêÈï∑„Çí‰øÉÈÄ≤„Åó„Åæ„Åô„ÄÇ"
                        },
                        {
                            text: "„ÄêÁµ±ÂêàÂïèÈ°å„ÄëÈï∑Âπ¥„ÅÆÁµåÈ®ì„ÇíÊåÅ„Å§„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶„ÄÅÊñ∞„Åó„ÅÑ„É°„É≥„Éê„Éº„Å®„ÅÆÂçîÊ•≠„ÅßÊúÄ„ÇÇÈáçË¶Å„Å™„ÅÆ„ÅØÔºü",
                            options: [
                                "Ëá™ÂàÜ„ÅÆÁµåÈ®ì„Å®Áü•Ë≠ò„Çí‰∏ÄÊñπÁöÑ„Å´Êïô„Åà„Çã",
                                "Áõ∏Êâã„ÅÆÂ∞ÇÈñÄÊÄß„ÇíÂ∞äÈáç„Åó„ÄÅ‰∫í„ÅÑ„ÅÆÂº∑„Åø„ÇíÊ¥ª„Åã„Åó„ÅüÂçîÂäõÈñ¢‰øÇ„ÇíÁØâ„Åè",
                                "ÁµåÈ®ì„ÅÆÂ∑Æ„ÇíÊòéÁ¢∫„Å´„Åó„Å¶ÊåáÂ∞éÁöÑÁ´ãÂ†¥„ÇíÁ¢∫Á´ã„Åô„Çã"
                            ],
                            correct: 1,
                            difficulty: 5,
                            explanation: "Áúü„ÅÆ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„ÅØ„ÄÅÁµåÈ®ì„Å´Èñ¢‰øÇ„Å™„Åè‰ªñËÄÖ„ÅÆÂ∞ÇÈñÄÊÄß„ÇíË™ç„ÇÅ„ÄÅÁõ∏‰∫íÂ≠¶Áøí„ÅÆÊ©ü‰ºö„Å®„Åó„Å¶ÂçîÊ•≠„ÇíÊçâ„Åà„Åæ„Åô„ÄÇ",
                            learningPoint: "üåü ÁµåÈ®ìË±äÂØå„Å™„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Åª„Å©„ÄÅË¨ôËôö„Åï„Å®Â≠¶ÁøíÊÑèÊ¨≤„ÇíÊåÅ„Å°Á∂ö„Åë„Çã„Åì„Å®„Åß„ÄÅ„Åï„Çâ„Å™„ÇãÊàêÈï∑„ÇíÈÅÇ„Åí„Çâ„Çå„Åæ„Åô„ÄÇ"
                        }
                    ]
                };
            }
            
            init() {
                this.updateProgress();
                this.showChapterIntro();
            }
            
            getCurrentChapter() {
                for (let chapter of this.gameData.chapters) {
                    if (chapter.questions.includes(this.currentQuestion)) {
                        return chapter;
                    }
                }
                return this.gameData.chapters[0];
            }
            
            showChapterIntro() {
                const chapter = this.getCurrentChapter();
                const isNewChapter = chapter.questions[0] === this.currentQuestion;
                
                if (isNewChapter) {
                    const content = `
                        <div class="chapter-intro">
                            <h2 class="chapter-title">${chapter.title}</h2>
                            <div class="character">${chapter.character}</div>
                            <div class="story-text">${chapter.story}</div>
                            <button class="submit-btn" onclick="game.showQuestion()">ÂÜíÈô∫„ÇíÈñãÂßã„Åô„Çã</button>
                        </div>
                    `;
                    document.getElementById('gameContent').innerHTML = content;
                } else {
                    this.showQuestion();
                }
            }
            
            showQuestion() {
                if (this.currentQuestion >= this.gameData.questions.length) {
                    this.showFinalResults();
                    return;
                }
                
                const question = this.gameData.questions[this.currentQuestion];
                this.maxScore++;
                
                const content = `
                    <div class="question">
                        <div class="question-text">
                            Âïè${this.currentQuestion + 1}: ${question.text}
                            <span style="float: right; color: #4ecdc4; font-size: 0.8em;">
                                Èõ£ÊòìÂ∫¶: ${'‚≠ê'.repeat(question.difficulty)}
                            </span>
                        </div>
                        <div class="options">
                            ${question.options.map((option, index) => `
                                <div class="option" onclick="game.selectOption(${index})" data-index="${index}">
                                    ${String.fromCharCode(65 + index)}. ${option}
                                </div>
                            `).join('')}
                        </div>
                        <button class="submit-btn" id="submitBtn" onclick="game.submitAnswer()" disabled>
                            ÂõûÁ≠î„ÇíÁ¢∫ÂÆö„Åô„Çã
                        </button>
                        <div class="feedback" id="feedback"></div>
                    </div>
                `;
                
                document.getElementById('gameContent').innerHTML = content;
                this.selectedAnswer = null;
            }
            
            selectOption(index) {
                // Êó¢Â≠ò„ÅÆÈÅ∏Êäû„ÇíËß£Èô§
                document.querySelectorAll('.option').forEach(opt => {
                    opt.classList.remove('selected');
                });
                
                // Êñ∞„Åó„ÅÑÈÅ∏Êäû„ÇíË®≠ÂÆö
                document.querySelector(`[data-index="${index}"]`).classList.add('selected');
                this.selectedAnswer = index;
                document.getElementById('submitBtn').disabled = false;
            }
            
            submitAnswer() {
                const question = this.gameData.questions[this.currentQuestion];
                const isCorrect = this.selectedAnswer === question.correct;
                const feedback = document.getElementById('feedback');
                
                // „Ç™„Éó„Ç∑„Éß„É≥„Å´ÁµêÊûú„ÇíË°®Á§∫
                document.querySelectorAll('.option').forEach((opt, index) => {
                    opt.style.pointerEvents = 'none';
                    if (index === question.correct) {
                        opt.classList.add('correct');
                    } else if (index === this.selectedAnswer && !isCorrect) {
                        opt.classList.add('incorrect');
                    }
                });
                
                if (isCorrect) {
                    this.score++;
                    feedback.className = 'feedback correct';
                    feedback.innerHTML = `
                        <div class="feedback-title">üéâ Ê≠£Ëß£„Åß„ÅôÔºÅ</div>
                        <div class="explanation">${question.explanation}</div>
                        <div class="learning-point">${question.learningPoint}</div>
                        <button class="next-btn" onclick="game.nextQuestion()">Ê¨°„ÅÆÂïèÈ°å„Å∏</button>
                    `;
                    this.checkAchievements();
                } else {
                    this.wrongAnswers.push({
                        questionNumber: this.currentQuestion + 1,
                        question: question.text,
                        yourAnswer: question.options[this.selectedAnswer],
                        correctAnswer: question.options[question.correct],
                        explanation: question.explanation,
                        learningPoint: question.learningPoint
                    });
                    
                    feedback.className = 'feedback incorrect';
                    feedback.innerHTML = `
                        <div class="feedback-title">üí° Â≠¶Áøí„ÅÆÊ©ü‰ºö„Åß„Åô</div>
                        <div class="explanation">
                            <strong>Ê≠£Ëß£:</strong> ${String.fromCharCode(65 + question.correct)}. ${question.options[question.correct]}<br><br>
                            <strong>Ëß£Ë™¨:</strong> ${question.explanation}
                        </div>
                        <div class="learning-point">${question.learningPoint}</div>
                        <button class="next-btn" onclick="game.nextQuestion()">Ê¨°„ÅÆÂïèÈ°å„Å∏</button>
                    `;
                }
                
                feedback.style.display = 'block';
                document.getElementById('submitBtn').style.display = 'none';
                this.updateProgress();
            }
            
            checkAchievements() {
                const scorePercentage = (this.score / this.maxScore) * 100;
                let achievement = null;
                
                if (this.score === 3 && this.currentQuestion === 2) {
                    achievement = { badge: "üåü", title: "ÂÆåÁíß„Å™„Çπ„Çø„Éº„Éà", description: "ÊúÄÂàù„ÅÆ3Âïè„ÇíÂÖ®„Å¶Ê≠£Ëß£„Åó„Åæ„Åó„ÅüÔºÅ" };
                } else if (this.score === 6 && this.currentQuestion === 5) {
                    achievement = { badge: "üéØ", title: "„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥„Éª„Éû„Çπ„Çø„Éº", description: "„Ç≥„Éü„É•„Éã„Ç±„Éº„Ç∑„Éß„É≥ÂàÜÈáé„ÅßÂÑ™ÁßÄ„Å™ÊàêÁ∏æ„Åß„ÅôÔºÅ" };
                } else if (scorePercentage >= 80) {
                    achievement = { badge: "üëë", title: "„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Éª„Ç®„Ç≠„Çπ„Éë„Éº„Éà", description: "È©öÁï∞ÁöÑ„Å™ÁêÜËß£Âäõ„ÇíÁ§∫„Åó„Å¶„ÅÑ„Åæ„ÅôÔºÅ" };
                }
                
                if (achievement) {
                    setTimeout(() => {
                        const achievementDiv = document.createElement('div');
                        achievementDiv.className = 'achievement';
                        achievementDiv.innerHTML = `
                            <div class="badge">${achievement.badge}</div>
                            <div><strong>${achievement.title}</strong></div>
                            <div>${achievement.description}</div>
                        `;
                        document.getElementById('gameContent').appendChild(achievementDiv);
                    }, 2000);
                }
            }
            
            nextQuestion() {
                this.currentQuestion++;
                this.updateProgress();
                this.showChapterIntro();
            }
            
            updateProgress() {
                const progress = ((this.currentQuestion) / this.gameData.questions.length) * 100;
                document.getElementById('progressBar').style.width = progress + '%';
                document.getElementById('currentQuestion').textContent = this.currentQuestion + 1;
                document.getElementById('score').textContent = this.score;
                
                // „É¨„Éô„É´Êõ¥Êñ∞
                const scorePercentage = this.maxScore > 0 ? (this.score / this.maxScore) * 100 : 0;
                let level = "Ë¶ãÁøí„ÅÑ";
                if (scorePercentage >= 90) level = "„Éû„Çπ„Çø„Éº";
                else if (scorePercentage >= 80) level = "„Ç®„Ç≠„Çπ„Éë„Éº„Éà";
                else if (scorePercentage >= 70) level = "„Éó„É≠";
                else if (scorePercentage >= 60) level = "‰∏äÁ¥öËÄÖ";
                else if (scorePercentage >= 40) level = "‰∏≠Á¥öËÄÖ";
                
                document.getElementById('level').textContent = level;
            }
            
            showFinalResults() {
                const scorePercentage = (this.score / this.maxScore) * 100;
                let finalRank, finalMessage, finalCharacter;
                
                if (scorePercentage >= 90) {
                    finalRank = "„Ç∞„É©„É≥„Éâ„Éû„Çπ„Çø„Éº„Éª„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´";
                    finalMessage = "Á¥†Êô¥„Çâ„Åó„ÅÑÔºÅ„ÅÇ„Å™„Åü„ÅØÁúü„ÅÆ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶„ÅÆË≥áË≥™„ÇíÂÇô„Åà„Å¶„ÅÑ„Åæ„Åô„ÄÇ";
                    finalCharacter = "üëë";
                } else if (scorePercentage >= 80) {
                    finalRank = "„Ç®„Ç≠„Çπ„Éë„Éº„Éà„Éª„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´";
                    finalMessage = "ÂÑ™ÁßÄ„Å™ÊàêÁ∏æ„Åß„ÅôÔºÅ„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´„Å®„Åó„Å¶„ÅÆÂü∫Áõ§„Åå„Åó„Å£„Åã„Çä„Å®ÁØâ„Åã„Çå„Å¶„ÅÑ„Åæ„Åô„ÄÇ";
                    finalCharacter = "üåü";
                } else if (scorePercentage >= 70) {
                    finalRank = "Ë™çÂÆö„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´";
                    finalMessage = "ÂêàÊ†º„Åß„ÅôÔºÅÂü∫Êú¨ÁöÑ„Å™Áü•Ë≠ò„ÅØË∫´„Å´„Å§„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åï„Çâ„Å™„ÇãÂêë‰∏ä„ÇíÁõÆÊåá„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ";
                    finalCharacter = "üéØ";
                } else if (scorePercentage >= 60) {
                    finalRank = "„Ç¢„Ç∑„Çπ„Çø„É≥„Éà„Éª„Éó„É≠„Éï„Çß„ÉÉ„Ç∑„Éß„Éä„É´";
                    finalMessage = "„ÇÇ„ÅÜÂ∞ë„Åó„Åß„ÅôÔºÅÂü∫Á§é„ÇíÂõ∫„ÇÅ„Å¶ÂÜçÊåëÊà¶„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ";
                    finalCharacter = "üå±";
                } else {
                    finalRank = "Â≠¶ÁøíËÄÖ";
                    finalMessage = "Â≠¶Áøí„ÅÆÊ©ü‰ºö„Å®„Åó„Å¶Ê¥ªÁî®„Åó„ÄÅÁü•Ë≠ò„ÇíÊ∑±„ÇÅ„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜ„ÄÇ";
                    finalCharacter = "üìö";
                }
                
                let weaknessReport = "";
                if (this.wrongAnswers.length > 0) {
                    weaknessReport = `
                        <div class="weakness-report">
                            <div class="weakness-title">üìä Âæ©Áøí„Éù„Ç§„É≥„Éà</div>
                            ${this.wrongAnswers.map(wrong => `
                                <div class="weakness-item">
                                    <strong>Âïè${wrong.questionNumber}:</strong> ${wrong.question}<br>
                                    <small style="color: #e53e3e;">„ÅÇ„Å™„Åü„ÅÆÂõûÁ≠î: ${wrong.yourAnswer}</small><br>
                                    <small style="color: #48bb78;">Ê≠£Ëß£: ${wrong.correctAnswer}</small><br>
                                    <em>${wrong.explanation}</em>
                                </div>
                            `).join('')}
                        </div>
                    `;
                }
                
                const content = `
                    <div class="final-results">
                        <div class="character" style="font-size: 5em;">${finalCharacter}</div>
                        <h2 class="chapter-title">ÂÜíÈô∫ÂÆå‰∫ÜÔºÅ</h2>
                        <div style="font-size: 2em; color: #4ecdc4; margin: 20px 0;">
                            ${this.score} / ${this.maxScore} ÁÇπ (${Math.round(scorePercentage)}%)
                        </div>
                        <div style="font-size: 1.5em; font-weight: 600; color: #667eea; margin-bottom: 20px;">
                            ${finalRank}
                        </div>
                        <div style="font-size: 1.2em; margin-bottom: 30px; color: #4a5568;">
                            ${finalMessage}
                        </div>
                        
                        ${weaknessReport}
                        
                        <div style="margin-top: 30px;">
                            <button class="restart-btn" onclick="game.restart()">üîÑ „ÇÇ„ÅÜ‰∏ÄÂ∫¶ÊåëÊà¶</button>
                            <button class="restart-btn" onclick="game.restartShuffle()">üé≤ „É©„É≥„ÉÄ„É†„É¢„Éº„Éâ„ÅßÂÜçÊåëÊà¶</button>
                            <button class="restart-btn" onclick="game.reviewMode()">üìñ Âæ©Áøí„É¢„Éº„Éâ</button>
                        </div>
                    </div>
                `;
                
                document.getElementById('gameContent').innerHTML = content;
            }
            
            restart() {
                this.currentQuestion = 0;
                this.score = 0;
                this.maxScore = 0;
                this.wrongAnswers = [];
                this.selectedAnswer = null;
                this.updateProgress();
                this.showChapterIntro();
            }
            
            restartShuffle() {
                // ÂïèÈ°å„Å®ÈÅ∏ÊäûËÇ¢„Çí„Ç∑„É£„ÉÉ„Éï„É´
                this.gameData.questions = this.shuffleArray(this.gameData.questions);
                this.gameData.questions.forEach(question => {
                    const correctAnswer = question.options[question.correct];
                    question.options = this.shuffleArray(question.options);
                    question.correct = question.options.indexOf(correctAnswer);
                });
                
                // „ÉÅ„É£„Éó„Çø„Éº„ÅÆÂïèÈ°å„Ç§„É≥„Éá„ÉÉ„ÇØ„Çπ„ÇíÊõ¥Êñ∞
                this.gameData.chapters.forEach((chapter, chapterIndex) => {
                    const questionsPerChapter = Math.ceil(this.gameData.questions.length / this.gameData.chapters.length);
                    const startIndex = chapterIndex * questionsPerChapter;
                    const endIndex = Math.min(startIndex + questionsPerChapter, this.gameData.questions.length);
                    chapter.questions = [];
                    for (let i = startIndex; i < endIndex; i++) {
                        chapter.questions.push(i);
                    }
                });
                
                this.restart();
            }
            
            shuffleArray(array) {
                const newArray = [...array];
                for (let i = newArray.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
                }
                return newArray;
            }
            
            reviewMode() {
                if (this.wrongAnswers.length === 0) {
                    alert("Âæ©Áøí„Åô„ÇãÂïèÈ°å„Åå„ÅÇ„Çä„Åæ„Åõ„ÇìÔºÅÂÖ®ÂïèÊ≠£Ëß£„Åß„Åó„Åüüéâ");
                    return;
                }
                
                // ÈñìÈÅï„Åà„ÅüÂïèÈ°å„ÅÆ„Åø„ÇíÂê´„ÇÄÊñ∞„Åó„ÅÑ„Ç≤„Éº„É†„Éá„Éº„Çø„Çí‰ΩúÊàê
                const reviewQuestions = this.wrongAnswers.map(wrong => {
                    return this.gameData.questions.find(q => q.text === wrong.question);
                });
                
                this.gameData.questions = reviewQuestions;
                this.gameData.chapters = [{
                    title: "Âæ©Áøí„É¢„Éº„Éâ",
                    character: "üìö",
                    story: "ÈñìÈÅï„Åà„ÅüÂïèÈ°å„ÇíÂæ©Áøí„Åó„Å¶„ÄÅÁü•Ë≠ò„ÇíÁ¢∫ÂÆü„Å´Ë∫´„Å´„Å§„Åë„Åæ„Åó„Çá„ÅÜ„ÄÇ",
                    questions: reviewQuestions.map((_, index) => index)
                }];
                
                this.restart();
            }
        }
        
        // „Ç≤„Éº„É†ÈñãÂßã
        const game = new ConductCodeGame();
    </script>
</body>
</html>
